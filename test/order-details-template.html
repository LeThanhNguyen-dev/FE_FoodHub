<template id="orderDetailsTemplate">
    <div class="modal-overlay" onclick="closeOrderDetails()">
        <div class="modal-content" onclick="event.stopPropagation()">
            <div class="modal-header">
                <h3 id="modalOrderId">Chi tiết đơn hàng</h3>
                <button class="btn-close" onclick="closeOrderDetails()">×</button>
            </div>
            <div class="modal-body">
                <div class="order-summary">
                    <div class="info-row">
                        <span>Trạng thái:</span>
                        <span id="modalStatus" class="badge"></span>
                    </div>
                    <div class="info-row">
                        <span>Loại đơn:</span>
                        <span id="modalOrderType"></span>
                    </div>
                    <div class="info-row">
                        <span>Thời gian:</span>
                        <span id="modalCreatedAt"></span>
                    </div>
                    <div class="info-row">
                        <span>Bàn:</span>
                        <span id="modalTableNumber"></span>
                    </div>
                    <div class="info-row">
                        <span>Nhân viên:</span>
                        <span id="modalUsername"></span>
                    </div>
                    <div class="info-row" id="modalNoteRow" style="display: none;">
                        <span>Ghi chú:</span>
                        <span id="modalNote"></span>
                    </div>
                </div>
                <div class="order-items-section">
                    <h4>Danh sách món ăn:</h4>
                    <div class="order-items-list" id="modalOrderItems"></div>
                </div>
                <div class="order-total">
                    <strong id="modalTotalAmount"></strong>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" id="modalUpdateStatus">Cập nhật trạng thái</button>
                <button class="btn btn-secondary" onclick="closeOrderDetails()">Đóng</button>
            </div>
        </div>
    </div>
</template>

<template id="orderItemTemplate">
    <div class="order-item">
        <div class="item-info">
            <strong class="item-name"></strong>
            <span class="item-details"></span>
        </div>
        <div class="item-status">
            <span class="badge"></span>
        </div>
    </div>
</template>

<template id="orderCardTemplate">
    <div class="col-md-4 col-lg-3">
        <div class="order-card" data-order-id="">
            <div class="order-header">
                <div class="d-flex justify-content-between align-items-start mb-2">
                    <div class="order-number">
                        <strong></strong>
                    </div>
                    <div class="text-end">
                        <div class="table-badge mb-1">
                            <i class="fas fa-chair"></i> <span class="table-number"></span>
                        </div>
                        <div class="order-time">
                            <i class="fas fa-clock"></i>
                            <small></small>
                        </div>
                    </div>
                </div>
                <div class="d-flex justify-content-between align-items-center mb-2">
                    <span class="status-badge"></span>
                </div>
                <div class="order-summary mb-2">
                    <small class="text-muted">
                        <i class="fas fa-utensils"></i> <span class="total-items"></span> món | 
                        <i class="fas fa-money-bill-wave"></i> <span class="total-amount"></span>
                    </small>
                </div>
                <div class="order-note mb-2" style="display: none;">
                    <small class="text-info">
                        <i class="fas fa-sticky-note"></i> <span class="note-text"></span>
                    </small>
                </div>
            </div>
            <div class="order-items">
                <!-- Item rows will be inserted here -->
            </div>
            <div class="more-items" style="display: none;">
                <i class="fas fa-plus-circle"></i> <span class="remaining-count"></span> món khác - Xem chi tiết
            </div>
            <div class="order-actions mt-3">
                <button class="btn btn-primary btn-sm start-cooking">
                    <i class="fas fa-fire"></i> Bắt Đầu Nấu
                </button>
                <button class="btn btn-success btn-sm complete-order">
                    <i class="fas fa-check"></i> Hoàn Thành
                </button>
                <button class="btn btn-outline-info btn-sm view-details">
                    <i class="fas fa-eye"></i> Chi Tiết
                </button>
            </div>
        </div>
    </div>
</template>

<template id="orderItemRowTemplate">
    <div class="item-row">
        <div class="item-info">
            <span class="item-name"></span>
            <span class="item-quantity"></span>
        </div>
        <span class="item-status"></span>
    </div>
</template>

<template id="errorStateTemplate">
    <div class="text-center text-danger error-state">
        <i class="fas fa-exclamation-triangle mb-2"></i>
        <div>Lỗi tải dữ liệu đơn hàng</div>
        <small class="error-message"></small>
        <div class="mt-2">
            <button class="btn btn-outline-primary btn-sm" onclick="loadOrders()">
                <i class="fas fa-refresh"></i> Thử lại
            </button>
        </div>
    </div>
</template>

<template id="emptyStateTemplate">
    <div class="text-center text-muted py-4">
        <i class="fas fa-clipboard-list fa-3x mb-3 opacity-50"></i>
        <div>Không có đơn hàng nào</div>
    </div>
</template>

<template id="loadingStateTemplate">
    <div class="text-center">
        <div class="loading"></div> Đang tải đơn hàng...
    </div>
</template>